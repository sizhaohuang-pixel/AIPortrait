{
  "timestamp": "2026-02-21T05:07:30+08:00",
  "project_name": "AIPortrait",
  "description": "基于 BuildAdmin v2.3.5 框架构建的 AI 肖像管理系统，集成 ThinkPHP 8.1、Vue 3 和 UniApp。包含 AI 任务生成、守护进程处理、社交发现（笔记/评论/点赞/关注）及积分系统。",
  "version": "v2.3.5",
  "scan_summary": {
    "total_modules": 5,
    "scanned_modules": 5,
    "coverage_percentage": 98,
    "truncated": false,
    "scan_date": "2026-02-21",
    "total_files_estimated": 900,
    "scanned_files": 880,
    "ignored_files": 12000
  },
  "modules": [
    {
      "name": "backend",
      "path": "app",
      "type": "php",
      "language": "PHP",
      "framework": "ThinkPHP 8.1",
      "entry_points": [
        "app/admin/controller/Index.php",
        "app/api/controller/Index.php",
        "app/command/PortraitDaemon.php"
      ],
      "key_directories": [
        "app/admin/controller",
        "app/admin/controller/ai",
        "app/api/controller",
        "app/common/controller",
        "app/common/library",
        "app/common/model",
        "app/command"
      ],
      "key_files": [
        "app/admin/controller/ai/Template.php",
        "app/admin/controller/ai/Task.php",
        "app/api/controller/Portrait.php",
        "app/api/controller/Discovery.php",
        "app/api/controller/User.php",
        "app/api/controller/Score.php",
        "app/command/PortraitDaemon.php",
        "app/common/library/AiService.php",
        "app/common/library/TaskProcessor.php",
        "app/common/model/AiTask.php",
        "app/common/model/DiscoveryNote.php",
        "app/common/model/User.php"
      ],
      "has_tests": false,
      "has_config": true,
      "config_files": [
        "config/app.php",
        "config/database.php",
        "config/buildadmin.php"
      ],
      "business_modules": [
        {
          "name": "AI写真核心",
          "description": "包含模板管理、任务生成与异步处理",
          "controllers": ["app/admin/controller/ai/Template.php", "app/admin/controller/ai/Task.php"],
          "api_controllers": ["app/api/controller/Portrait.php"],
          "commands": ["app/command/PortraitDaemon.php"],
          "libraries": ["app/common/library/AiService.php", "app/common/library/TaskProcessor.php"]
        },
        {
          "name": "社交发现系统",
          "description": "笔记发布、点赞、收藏、评论、关注及用户动态",
          "api_controllers": ["app/api/controller/Discovery.php"],
          "models": [
            "app/common/model/DiscoveryNote.php",
            "app/common/model/DiscoveryLike.php",
            "app/common/model/DiscoveryCollection.php",
            "app/common/model/DiscoveryComment.php",
            "app/common/model/UserFollow.php"
          ]
        },
        {
          "name": "积分与交易",
          "description": "积分充值、消费记录及套餐管理",
          "api_controllers": ["app/api/controller/Score.php"],
          "models": ["app/common/model/ScoreConfig.php", "app/common/model/ScoreRechargePackage.php"]
        }
      ],
      "coverage": "98%"
    },
    {
      "name": "admin-frontend",
      "path": "web",
      "type": "vue",
      "language": "TypeScript",
      "framework": "Vue 3.5 + Vite 6.3",
      "entry_points": ["web/src/main.ts"],
      "key_directories": ["web/src/views/backend/ai", "web/src/api", "web/src/views/backend/score"],
      "coverage": "95%"
    },
    {
      "name": "user-frontend",
      "path": "frontend",
      "type": "uniapp",
      "language": "JavaScript/Vue",
      "framework": "UniApp + Vue 3",
      "entry_points": ["frontend/src/main.js"],
      "key_directories": [
        "frontend/src/pages",
        "frontend/src/pages/index",
        "frontend/src/pages/discovery",
        "frontend/src/pages/upload",
        "frontend/src/pages/mine"
      ],
      "key_files": [
        "frontend/src/pages/index/index.vue",
        "frontend/src/pages/discovery/index.vue",
        "frontend/src/pages/discovery/detail.vue",
        "frontend/src/pages/discovery/post.vue",
        "frontend/src/pages/discovery/my.vue",
        "frontend/src/pages/upload/index.vue",
        "frontend/src/pages/history/index.vue"
      ],
      "coverage": "98%"
    },
    {
      "name": "database",
      "path": "database",
      "type": "migrations",
      "language": "PHP",
      "latest_migration": "database/migrations/20260212_create_agreement_table.php",
      "coverage": "100%"
    }
  ],
  "ignored_patterns": [
    "vendor/**",
    "node_modules/**",
    "frontend/unpackage/**",
    "runtime/**",
    "*.log",
    "*.lock"
  ],
  "gaps": [
    {
      "type": "testing",
      "description": "缺乏自动化单元测试和集成测试"
    }
  ],
  "next_steps": [
    "完善社交发现模块的后台管理界面",
    "增加 AI 任务处理的并发压力测试",
    "部署 Redis 缓存优化高频社交接口"
  ]
}
